#pragma once
#include "Shape"
#include <vector>
#include <iostream>

template<typename T>
class ComplexShape : public Shape<T> {
    std::vector<Shape<T>*> shapes;
  public:
    void addShape(Shape<T>* s) {
        shapes.push_back(s);
    }

    T area() {
        T sumarea = T(0);
        for (size_t i = 0; i < shapes.size(); i++) {
            sumarea += shapes[i]->area();
        }
        return sumarea;
    }
    std::string str() {
        std::stringstream s;
        s << "CX(";
        for (size_t i = 0; i < shapes.size(); i++) {
            s << shapes[i]->str();
            if (i+1 < shapes.size())
                s << ",";
        }
        s << ")";
        return s.str();
    }
    ~ComplexShape() { std::cout << "~ComplexShape()" << std::endl; }
};
